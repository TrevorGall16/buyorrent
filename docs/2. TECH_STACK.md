# 2. TECH STACK & ARCHITECTURE

## 1. Primary Stack Selection
**PATH B: Scalable Content / Logic (Framework)**
* **Framework:** Next.js 16 (App Router).
* **Styling:** Tailwind CSS 3.4 (Utility-first).
* **Visualization:** Recharts 2.15.
* **Language:** TypeScript 5.6 (Strict Mode).
* **Icons:** Lucide React or Heroicons.

## 2. File & Folder Structure
```text
/app
  ├── layout.tsx                # Root (Header, Footer, Ads, Cookies)
  ├── page.tsx                  # Home (City Selector)
  ├── calculator/               # Global Calculator Page
  ├── [city]/
  │   └── buy-vs-rent/          # SSG City Pages
/components
  ├── calculator/               # Logic Components (QuickInputs, Results)
  ├── ads/                      # CLS-Safe AdContainers
  ├── ui/                       # Your Custom Reusable Components (Button.tsx, Card.tsx)
/lib
  ├── finance.ts                # Core Math Engine
  ├── country-config.ts         # International Logic
/data
  └── cities.json               # Static DB

  3. Data Strategy

    Source: cities.json (Static JSON).

    Schema:

        slug: URL-safe string.

        defaults: Object containing avg_home_price, avg_rent, tax_rate.

        country_code: Links to country-config.ts rules.

    Validation: Build-time script ensures no negative numbers or missing slugs.

4. Performance Budgets

    Bundle Size: < 80KB Initial JS.

    Optimization:

        Use useDebounce (500ms) for calculator inputs.

        Use next/font with swap.

        Lazy load Recharts if heavy.